import path from 'path';

import {Namer} from '@parcel/plugin';

export default new Namer({
  name({bundle, bundleGraph, logger, options}) {
    if (bundle.filePath != null) return bundle.filePath;

    const name = basenameWithoutExtension(bundle.getMainEntry().filePath);

    return name + '.' + bundle.type;
  },
});

function basenameWithoutExtension(file) {
  return path.basename(file, path.extname(file));
}
